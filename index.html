<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Premium Store | Shop Now</title>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
  />
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(
          rgba(255, 255, 255, 0.95),
          rgba(255, 255, 255, 0.95)
        ),
        url('https://images.unsplash.com/photo-1512436991641-6745cdb1723f?auto=format&fit=crop&w=1350&q=80')
          no-repeat center center fixed;
      background-size: cover;
      min-height: 100vh;
      color: #333;
    }
    header { 
      background: #ffffffcc; 
      padding: 1rem 2rem; 
      display: flex; 
      justify-content: space-between; 
      align-items: center; 
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); 
      position: sticky; 
      top: 0; 
      z-index: 100; 
    }
    .logo { 
      font-size: 1.8rem; 
      font-weight: 700; 
      color: #4361ee; 
      cursor: default; 
    }
    .logo span { 
      color: #f72585; 
    }
    .search-container { 
      display: flex; 
      gap: 1rem; 
      align-items: center; 
      flex-wrap: wrap; 
    }
    .search-bar input { 
      padding: 0.5rem 0.75rem; 
      border-radius: 5px; 
      border: 1px solid #ccc; 
      width: 220px; 
      font-size: 1rem; 
    }
    .search-bar button { 
      background: #4361ee; 
      color: white; 
      padding: 0.55rem 1.2rem; 
      border: none; 
      border-radius: 5px; 
      font-weight: 600; 
      cursor: pointer; 
      transition: background 0.3s ease; 
    }
    .search-bar button:hover { 
      background: #365acb; 
    }
    #categoryFilter { 
      padding: 0.5rem 0.75rem; 
      font-size: 1rem; 
      border-radius: 5px; 
      border: 1px solid #ccc; 
      cursor: pointer; 
      background: white; 
    }
    .user-actions { 
      display: flex; 
      gap: 1rem;
      align-items: center;
    }
    .user-actions button, .user-actions a { 
      background: #f72585; 
      color: white; 
      padding: 0.5rem 1rem; 
      border-radius: 5px; 
      border: none; 
      text-decoration: none; 
      cursor: pointer; 
      font-weight: 600; 
      transition: opacity 0.3s ease; 
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .user-actions button:hover, .user-actions a:hover { 
      opacity: 0.85; 
    }
    .badge {
      background: #4361ee;
      color: white;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 0.75rem;
      margin-left: 0.25rem;
    }
    .hero { 
      text-align: center; 
      padding: 3rem 1rem 2rem; 
      font-weight: 600; 
      text-shadow: 1px 1px 3px #ffffffaa; 
      color: #2a2a2a; 
    }
    .products-grid { 
      display: grid; 
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); 
      gap: 2rem; 
      padding: 1rem 2rem 3rem; 
      max-width: 1200px; 
      margin: 0 auto; 
    }
    .product-card { 
      background: white; 
      border-radius: 10px; 
      overflow: hidden; 
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.12); 
      display: flex; 
      flex-direction: column; 
      justify-content: space-between; 
      transition: transform 0.25s ease; 
    }
    .product-card:hover { 
      transform: translateY(-5px); 
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15); 
    }
    .product-image { 
      width: 100%; 
      height: 180px; 
      object-fit: cover; 
      border-bottom: 1px solid #ddd; 
    }
    .product-info { 
      padding: 1rem; 
      flex-grow: 1; 
    }
    .product-title { 
      font-size: 1.25rem; 
      font-weight: 700; 
      margin-bottom: 0.25rem; 
      color: #4361ee; 
    }
    .product-price { 
      color: #f72585; 
      font-weight: 700; 
      margin-bottom: 0.5rem; 
      font-size: 1.1rem; 
    }
    .product-actions { 
      display: flex; 
      flex-wrap: wrap; 
      gap: 0.5rem; 
      margin-top: auto; 
      padding: 0 1rem 1rem; 
    }
    .product-actions button { 
      border: none; 
      padding: 0.5rem; 
      border-radius: 5px; 
      cursor: pointer; 
      flex: 1 1 auto; 
      min-width: 80px; 
      text-align: center; 
      font-weight: 600; 
      color: white; 
      transition: background 0.3s ease; 
    }
    .view-details-btn { 
      background: #4361ee; 
    }
    .add-cart-btn { 
      background: #2ecc71; 
    }
    .add-fav-btn { 
      background: #e67e22; 
    }
    .add-book-btn { 
      background: #ff5722; 
    }
    .product-actions button:hover { 
      filter: brightness(0.9); 
    }
    .modal { 
      display: none; 
      position: fixed; 
      top: 0; 
      left: 0; 
      width: 100%; 
      height: 100%; 
      background: rgba(0, 0, 0, 0.5); 
      justify-content: center; 
      align-items: center; 
      z-index: 1000; 
    }
    .modal-content { 
      background: white; 
      border-radius: 10px; 
      padding: 2rem; 
      width: 90%; 
      max-width: 600px; 
      position: relative; 
      max-height: 90vh; 
      overflow-y: auto; 
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3); 
    }
    .close-btn { 
      position: absolute; 
      top: 15px; 
      right: 15px; 
      font-size: 1.5rem; 
      color: #666; 
      cursor: pointer; 
      font-weight: 700; 
    }
    .no-products { 
      grid-column: 1/-1; 
      font-size: 1.5rem; 
      text-align: center; 
      color: #777; 
      padding: 3rem 1rem; 
    }
    form label { 
      display: block; 
      margin-top: 1rem; 
      font-weight: 600; 
    }
    form input, form select, form textarea { 
      width: 100%; 
      padding: 0.5rem; 
      margin-top: 0.25rem; 
      border-radius: 5px; 
      border: 1px solid #ccc; 
      font-size: 1rem; 
    }
    form button[type="submit"] { 
      margin-top: 1.5rem; 
      background: #ff5722; 
      color: white; 
      border: none; 
      padding: 0.75rem 1.5rem; 
      font-weight: 700; 
      cursor: pointer; 
      border-radius: 5px; 
      width: 100%; 
      font-size: 1.1rem; 
    }
    form button[type="submit"]:hover { 
      background: #e64a19; 
    }
    .cart-item {
      display: flex;
      justify-content: space-between;
      padding: 0.75rem 0;
      border-bottom: 1px solid #eee;
    }
    .cart-item:last-child {
      border-bottom: none;
    }
    .booking-badge {
      position: absolute;
      top: -8px;
      right: -8px;
      background: #f72585;
      color: white;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.75rem;
    }
    .booking-btn-container {
      position: relative;
      display: inline-block;
    }
    .booking-item {
      padding: 1rem;
      border-bottom: 1px solid #eee;
    }
    .booking-item:last-child {
      border-bottom: none;
    }
    .admin-login-container {
      max-width: 400px;
      margin: 2rem auto;
      padding: 2rem;
      background: white;
      border-radius: 10px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }
  </style>
</head>
<body>

<header>
  <div class="logo">Premium<span>Store</span></div>
  <div class="search-container">
    <div class="search-bar">
      <input type="text" id="searchInput" placeholder="Search products..." />
      <button onclick="displayProducts()">Search</button>
    </div>
    <select id="categoryFilter" onchange="displayProducts()">
      <option value="all">All Categories</option>
      <option value="food">Food</option>
      <option value="clothes">Clothes</option>
      <option value="groceries">Groceries</option>
      <option value="domestic_appliances">Domestic Appliances</option>
    </select>
  </div>
  <div class="user-actions">
    <button onclick="viewCart()">
      <i class="fas fa-shopping-cart"></i> Cart 
      <span class="badge" id="cartCount">0</span>
    </button>
    <div class="booking-btn-container">
      <a href="#" onclick="viewBookings()">
        <i class="fas fa-calendar-alt"></i> Bookings
      </a>
      <span class="booking-badge" id="bookingCount">0</span>
    </div>
    <a href="login.html" class="admim">
      <i class="fas fa-lock"></i> Admin
    </a>
  </div>
</header>

<section class="hero">
  <h1>Welcome to PremiumStore!</h1>
  <p>Your trusted destination for authentic products.</p>
</section>

<section class="products-grid" id="productsGrid"></section>

<!-- Product Details Modal -->
<div class="modal" id="productDetailsModal">
  <div class="modal-content">
    <span class="close-btn" onclick="closeModal('productDetailsModal')">&times;</span>
    <div id="productDetailsContent"></div>
  </div>
</div>

<!-- Cart Modal -->
<div class="modal" id="cartModal">
  <div class="modal-content">
    <span class="close-btn" onclick="closeModal('cartModal')">&times;</span>
    <h2>Your Cart</h2>
    <div id="cartItems"></div>
    <div id="cartTotal" style="font-weight: 700; font-size: 1.2rem; margin-top: 1rem;"></div>
    <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
      <button onclick="clearCart()" style="background:#f72585; padding:0.75rem; color:white; font-weight:700; border:none; border-radius:5px; cursor:pointer; flex:1;">Clear Cart</button>
      <button onclick="checkoutCart()" style="background:#2ecc71; padding:0.75rem; color:white; font-weight:700; border:none; border-radius:5px; cursor:pointer; flex:1;">Checkout</button>
    </div>
  </div>
</div>

<!-- Checkout Form Modal -->
<div class="modal" id="checkoutModal">
  <div class="modal-content">
    <span class="close-btn" onclick="closeModal('checkoutModal')">&times;</span>
    <h2>Checkout</h2>
    <form id="checkoutForm" onsubmit="submitCheckout(event)">
      <label for="checkoutName">Full Name:</label>
      <input type="text" id="checkoutName" name="checkoutName" required />
      
      <label for="checkoutEmail">Email:</label>
      <input type="email" id="checkoutEmail" name="checkoutEmail" required />
      
      <label for="checkoutPhone">Phone Number:</label>
      <input type="tel" id="checkoutPhone" name="checkoutPhone" required pattern="[0-9]{10}" placeholder="10 digit number" />
      
      <label for="checkoutAddress">Shipping Address:</label>
      <textarea id="checkoutAddress" name="checkoutAddress" rows="3" required></textarea>
      
      <label for="checkoutPayment">Payment Method:</label>
      <select id="checkoutPayment" name="checkoutPayment" required>
        <option value="">Select payment method</option>
        <option value="upi">UPI Payment</option>
        <option value="card">Credit/Debit Card</option>
        <option value="cod">Cash on Delivery</option>
      </select>
      
      <button type="submit">Complete Purchase</button>
    </form>
    <div id="checkoutStatus" style="margin-top:1rem; font-weight:600;"></div>
  </div>
</div>

<!-- Booking Modal -->
<div class="modal" id="bookingModal">
  <div class="modal-content">
    <span class="close-btn" onclick="closeModal('bookingModal')">&times;</span>
    <h2>Product Booking</h2>
    <form id="bookingForm" onsubmit="submitBooking(event)">
      <label for="bookingProduct">Select Product:</label>
      <select id="bookingProduct" name="bookingProduct" required>
        <option value="">Select a product</option>
      </select>

      <label for="bookingName">Name:</label>
      <input type="text" id="bookingName" name="bookingName" required />

      <label for="bookingEmail">Email:</label>
      <input type="email" id="bookingEmail" name="bookingEmail" required />

      <label for="bookingPhone">Phone:</label>
      <input type="tel" id="bookingPhone" name="bookingPhone" required pattern="[0-9]{10}" placeholder="10 digit number" />

      <label for="bookingDate">Booking Date:</label>
      <input type="date" id="bookingDate" name="bookingDate" required min="">

      <button type="submit">Submit Booking</button>
    </form>
    <div id="bookingStatus" style="margin-top:1rem; font-weight:600;"></div>
  </div>
</div>
<!-- Bookings List Modal -->
<div class="modal" id="bookingsListModal">
  <div class="modal-content">
    <span class="close-btn" onclick="closeModal('bookingsListModal')">&times;</span>
    <h2>Your Bookings</h2>
    <div id="bookingsList"></div>
  </div>
</div>

<script>
  // Initialize localStorage data if not exists
  if (!localStorage.getItem('products')) {
    const sampleProducts = [
      {
        id: 1,
        name: "Premium T-Shirt",
        price: 24.99,
        stock: 10,
        category: "clothes",
        image: "https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?auto=format&fit=crop&w=500&q=80",
        description: "High quality cotton t-shirt with premium finish.",
        status: "active"
      },
      {
        id: 2,
        name: "Designer Jeans",
        price: 59.99,
        stock: 5,
        category: "clothes",
        image: "https://images.unsplash.com/photo-1541099649105-f69ad21f3246?auto=format&fit=crop&w=500&q=80",
        description: "Slim fit designer jeans with premium fabric.",
        status: "active"
      },
      {
        id: 3,
        name: "Smart Watch",
        price: 199.99,
        stock: 8,
        category: "domestic_appliances",
        image: "https://images.unsplash.com/photo-1523275335684-37898b6baf30?auto=format&fit=crop&w=500&q=80",
        description: "Latest smart watch with health monitoring features.",
        status: "active"
      }
    ];
    localStorage.setItem('products', JSON.stringify(sampleProducts));
  }

  if (!localStorage.getItem('cart')) {
    localStorage.setItem('cart', JSON.stringify([]));
  }

  if (!localStorage.getItem('bookings')) {
    localStorage.setItem('bookings', JSON.stringify([]));
  }

  if (!localStorage.getItem('orders')) {
    localStorage.setItem('orders', JSON.stringify([]));
  }

  if (!localStorage.getItem('adminCredentials')) {
    localStorage.setItem('adminCredentials', JSON.stringify({
      username: "admin",
      password: "admin123" // In a real app, this should be hashed
    }));
  }

  // Display products on page load
  function displayProducts() {
    const productsGrid = document.getElementById('productsGrid');
    productsGrid.innerHTML = '';
    const searchTerm = document.getElementById('searchInput').value.toLowerCase();
    const selectedCategory = document.getElementById('categoryFilter').value;

    // Always get fresh products data from localStorage
    let products = JSON.parse(localStorage.getItem('products')) || [];
    
    // Filter only active products
    products = products.filter(p => p.status === 'active');

    const filtered = products.filter(p => {
      const matchesCategory = selectedCategory === 'all' || 
                            p.category.toLowerCase() === selectedCategory.toLowerCase();
      const matchesSearch = p.name.toLowerCase().includes(searchTerm);
      return matchesCategory && matchesSearch;
    });

    if (filtered.length === 0) {
      productsGrid.innerHTML = '<div class="no-products">No matching products found.</div>';
    } else {
      filtered.forEach(p => {
        const card = document.createElement('div');
        card.className = 'product-card';
        card.innerHTML = `
          <img class="product-image" src="${p.image}" alt="${p.name}">
          <div class="product-info">
            <div class="product-title">${p.name}</div>
            <div class="product-price">₹${p.price}</div>
          </div>
          <div class="product-actions">
            <button class="view-details-btn" onclick='viewDetails(${JSON.stringify(p)})'>
              <i class="fas fa-eye"></i> View
            </button>
            <button class="add-cart-btn" onclick='addToCart(${JSON.stringify(p)})'>
              <i class="fas fa-cart-plus"></i> Add
            </button>
            <button class="add-book-btn" onclick="showBookingForm(${p.id})">
              <i class="fas fa-calendar"></i> Book
            </button>
          </div>
        `;
        productsGrid.appendChild(card);
      });
    }
    updateCartCount();
    updateBookingCount();
  }

  // View product details with fresh data
  function viewDetails(p) {
    // Get fresh product data from localStorage
    const products = JSON.parse(localStorage.getItem('products')) || [];
    const currentProduct = products.find(product => product.id === p.id) || p;
    
    const modal = document.getElementById('productDetailsModal');
    document.getElementById('productDetailsContent').innerHTML = `
      <h2>${currentProduct.name}</h2>
      <img src="${currentProduct.image}" style="width:100%; max-height:250px; object-fit:cover; border-radius:8px;" />
      <p style="margin-top:1rem;"><strong>Price:</strong> ₹${currentProduct.price}</p>
      <p><strong>Category:</strong> ${currentProduct.category.replace('_', ' ')}</p>
      <p><strong>Availability:</strong> ${currentProduct.stock > 0 ? 'In Stock' : 'Out of Stock'}</p>
      <p><strong>Description:</strong> ${currentProduct.description}</p>
      <div style="margin-top:1.5rem; display:flex; gap:1rem;">
        <button onclick="addToCart(${JSON.stringify(currentProduct)})" style="background:#2ecc71; padding:0.75rem; color:white; font-weight:700; border:none; border-radius:5px; cursor:pointer; flex:1;">
          <i class="fas fa-cart-plus"></i> Add to Cart
        </button>
        <button onclick="showBookingForm(${currentProduct.id})" style="background:#ff5722; padding:0.75rem; color:white; font-weight:700; border:none; border-radius:5px; cursor:pointer; flex:1;">
          <i class="fas fa-calendar"></i> Book Now
        </button>
      </div>
    `;
    modal.style.display = 'flex';
  }

  // Close modal
  function closeModal(id) {
    document.getElementById(id).style.display = 'none';
  }

  // View cart
  function viewCart() {
    const cart = JSON.parse(localStorage.getItem('cart')) || [];
    const cartItemsEl = document.getElementById('cartItems');
    const cartTotalEl = document.getElementById('cartTotal');
    
    cartItemsEl.innerHTML = '';
    
    if (cart.length === 0) {
      cartItemsEl.innerHTML = '<p>Your cart is empty</p>';
      cartTotalEl.innerHTML = '';
      return;
    }
    
    let total = 0;
    cart.forEach(item => {
      const itemEl = document.createElement('div');
      itemEl.className = 'cart-item';
      itemEl.innerHTML = `
        <div>
          <strong>${item.name}</strong>
          <p>₹${item.price} x ${item.quantity}</p>
        </div>
        <div>
          ₹${(item.price * item.quantity).toFixed(2)}
        </div>
      `;
      cartItemsEl.appendChild(itemEl);
      total += item.price * item.quantity;
    });
    
    cartTotalEl.innerHTML = `Total: ₹${total.toFixed(2)}`;
    document.getElementById('cartModal').style.display = 'flex';
  }

  // Add to cart
  function addToCart(product) {
    const cart = JSON.parse(localStorage.getItem('cart')) || [];
    const existingItem = cart.find(item => item.id === product.id);
    
    if (existingItem) {
      existingItem.quantity += 1;
    } else {
      cart.push({
        id: product.id,
        name: product.name,
        price: product.price,
        image: product.image,
        quantity: 1
      });
    }
    
    localStorage.setItem('cart', JSON.stringify(cart));
    updateCartCount();
    
    // Show checkout form if coming from product details
    if (document.getElementById('productDetailsModal').style.display === 'flex') {
      closeModal('productDetailsModal');
      showCheckoutForm();
    } else {
      alert(`${product.name} added to cart!`);
    }
  }

  // Update cart count badge
  function updateCartCount() {
    const cart = JSON.parse(localStorage.getItem('cart')) || [];
    const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
    document.getElementById('cartCount').textContent = totalItems;
  }

  // Clear cart
  function clearCart() {
    localStorage.setItem('cart', JSON.stringify([]));
    updateCartCount();
    document.getElementById('cartItems').innerHTML = '<p>Your cart is empty</p>';
    document.getElementById('cartTotal').innerHTML = '';
  }

  // Show checkout form
  function checkoutCart() {
    const cart = JSON.parse(localStorage.getItem('cart')) || [];
    if (cart.length === 0) {
      alert('Your cart is empty!');
      return;
    }
    closeModal('cartModal');
    document.getElementById('checkoutModal').style.display = 'flex';
  }

  // Submit checkout
  function submitCheckout(e) {
    e.preventDefault();
    const cart = JSON.parse(localStorage.getItem('cart')) || [];
    const orders = JSON.parse(localStorage.getItem('orders')) || [];
    
    const order = {
      id: Date.now(),
      date: new Date().toISOString(),
      items: cart,
      customer: {
        name: document.getElementById('checkoutName').value,
        email: document.getElementById('checkoutEmail').value,
        phone: document.getElementById('checkoutPhone').value,
        address: document.getElementById('checkoutAddress').value
      },
      payment: document.getElementById('checkoutPayment').value,
      status: 'processing',
      total: cart.reduce((sum, item) => sum + (item.price * item.quantity), 0)
    };
    
    orders.push(order);
    localStorage.setItem('orders', JSON.stringify(orders));
    
    // Clear cart
    localStorage.setItem('cart', JSON.stringify([]));
    updateCartCount();
    
    document.getElementById('checkoutStatus').innerHTML = `
      <p style="color:#2ecc71;">Order placed successfully!</p>
      <p>Order ID: #${order.id}</p>
      <p>We'll contact you shortly for confirmation.</p>
    `;
    
    document.getElementById('checkoutForm').reset();
    
    setTimeout(() => {
      closeModal('checkoutModal');
      document.getElementById('checkoutStatus').innerHTML = '';
    }, 3000);
  }

  // Show booking form
  function showBookingForm(productId = null) {
    const products = JSON.parse(localStorage.getItem('products')) || [];
    const bookingProductSelect = document.getElementById('bookingProduct');
    
    bookingProductSelect.innerHTML = '<option value="">Select a product</option>';
    products.filter(p => p.status === 'active').forEach(p => {
      const option = document.createElement('option');
      option.value = p.id;
      option.textContent = `${p.name} (₹${p.price})`;
      if (productId && p.id === productId) {
        option.selected = true;
      }
      bookingProductSelect.appendChild(option);
    });
    
    // Set minimum date to today
    const today = new Date().toISOString().split('T')[0];
    document.getElementById('bookingDate').min = today;
    document.getElementById('bookingDate').value = today;
    
    document.getElementById('bookingStatus').innerHTML = '';
    document.getElementById('bookingModal').style.display = 'flex';
  }

  // Submit booking
  function submitBooking(e) {
    e.preventDefault();
    const bookings = JSON.parse(localStorage.getItem('bookings')) || [];
    const products = JSON.parse(localStorage.getItem('products')) || [];
    
    const productId = parseInt(document.getElementById('bookingProduct').value);
    const product = products.find(p => p.id === productId);
    
    if (!product) {
      document.getElementById('bookingStatus').innerHTML = '<p style="color:#f72585;">Please select a valid product</p>';
      return;
    }
    
    const booking = {
      id: 'BK-' + Date.now(),
      productId: product.id,
      productName: product.name,
      productPrice: product.price,
      productImage: product.image,
      customerName: document.getElementById('bookingName').value,
      customerEmail: document.getElementById('bookingEmail').value,
      customerPhone: document.getElementById('bookingPhone').value,
      bookingDate: document.getElementById('bookingDate').value,
      status: 'confirmed',
      createdAt: new Date().toISOString()
    };
    
    bookings.push(booking);
    localStorage.setItem('bookings', JSON.stringify(bookings));
    
    document.getElementById('bookingStatus').innerHTML = `
      <p style="color:#2ecc71;">Booking submitted successfully!</p>
      <p>Booking ID: ${booking.id}</p>
      <p>Product: ${booking.productName}</p>
      <p>Date: ${new Date(booking.bookingDate).toLocaleDateString()}</p>
    `;
    
    document.getElementById('bookingForm').reset();
    updateBookingCount();
    
    setTimeout(() => {
      closeModal('bookingModal');
      document.getElementById('bookingStatus').innerHTML = '';
    }, 5000);
  }

  // Update booking count badge
  function updateBookingCount() {
    const bookings = JSON.parse(localStorage.getItem('bookings')) || [];
    document.getElementById('bookingCount').textContent = bookings.length;
  }

  // View bookings list
  function viewBookings() {
    const bookings = JSON.parse(localStorage.getItem('bookings')) || [];
    const bookingsListEl = document.getElementById('bookingsList');
    
    bookingsListEl.innerHTML = '';
    
    if (bookings.length === 0) {
      bookingsListEl.innerHTML = '<p>You have no bookings yet</p>';
    } else {
      bookings.forEach(booking => {
        const bookingEl = document.createElement('div');
        bookingEl.className = 'booking-item';
        bookingEl.innerHTML = `
          <div style="display:flex; gap:1rem; margin-bottom:0.5rem;">
            <img src="${booking.productImage}" style="width:60px; height:60px; object-fit:cover; border-radius:5px;">
            <div>
              <h3 style="margin:0;">${booking.productName}</h3>
              <p style="margin:0.25rem 0; color:#f72585;">₹${booking.productPrice}</p>
            </div>
          </div>
          <p><strong>Booking ID:</strong> ${booking.id}</p>
          <p><strong>Date:</strong> ${new Date(booking.bookingDate).toLocaleDateString()}</p>
          <p><strong>Status:</strong> <span style="color:${booking.status === 'confirmed' ? '#2ecc71' : '#f72585'}; font-weight:600;">${booking.status}</span></p>
          <button onclick="cancelBooking('${booking.id}')" style="background:#f72585; padding:0.5rem; color:white; font-weight:600; border:none; border-radius:5px; cursor:pointer; margin-top:0.5rem; width:100%;">
            Cancel Booking
          </button>
        `;
        bookingsListEl.appendChild(bookingEl);
      });
    }
    
    document.getElementById('bookingsListModal').style.display = 'flex';
  }

  // Cancel booking
  function cancelBooking(bookingId) {
    let bookings = JSON.parse(localStorage.getItem('bookings')) || [];
    bookings = bookings.filter(b => b.id !== bookingId);
    localStorage.setItem('bookings', JSON.stringify(bookings));
    updateBookingCount();
    viewBookings();
  }

  // Listen for storage changes to update products when admin makes changes
  window.addEventListener('storage', function(event) {
    if (event.key === 'products') {
      console.log("Products updated in localStorage, refreshing display...");
      displayProducts();
    }
  });

  // Initialize page
  window.onload = function() {
    displayProducts();
    
    // Set today's date as default for booking date
    const today = new Date().toISOString().split('T')[0];
    document.getElementById('bookingDate').value = today;
  };
fetch("http://127.0.0.1:5000/get-products")
  .then(response => response.json())
  .then(data => {
    console.log("Fetched Products:", data);
    // render your products here
  });


</script>
</body>
</html>